<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2016-06-17 Fri 10:17 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>Outreach Portal 3.0 Data Model</title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="VLEAD" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Outreach Portal 3.0 Data Model</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">1. Introduction</a></li>
<li><a href="#orgheadline5">2. Notation</a>
<ul>
<li><a href="#orgheadline2">2.1. Sets, cardinality and relations</a></li>
<li><a href="#orgheadline3">2.2. Relations and their cardinality type</a></li>
<li><a href="#orgheadline4">2.3. Example of Entity Relationship notation</a></li>
</ul>
</li>
<li><a href="#orgheadline6">3. Abstract Entity Types</a></li>
<li><a href="#orgheadline8">4. Relations and cardinality constraints over entity types</a>
<ul>
<li><a href="#orgheadline7">4.1. Keys</a></li>
</ul>
</li>
<li><a href="#orgheadline13">5. System state</a>
<ul>
<li><a href="#orgheadline9">5.1. Primary Entity sets</a></li>
<li><a href="#orgheadline10">5.2. Derived Entity sets</a></li>
<li><a href="#orgheadline12">5.3. Referential Integrity Constraints over entity-sets</a>
<ul>
<li><a href="#orgheadline11">5.3.1. <code>user-set</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline62">6. Operations</a>
<ul>
<li><a href="#orgheadline14">6.1. Actor</a></li>
<li><a href="#orgheadline19">6.2. Add User</a>
<ul>
<li><a href="#orgheadline15">6.2.1. Parameters</a></li>
<li><a href="#orgheadline16">6.2.2. Actor credentials</a></li>
<li><a href="#orgheadline17">6.2.3. Referential Integrity</a></li>
<li><a href="#orgheadline18">6.2.4. Effect</a></li>
</ul>
</li>
<li><a href="#orgheadline24">6.3. Add Role</a>
<ul>
<li><a href="#orgheadline20">6.3.1. Parameters</a></li>
<li><a href="#orgheadline21">6.3.2. Actor credentials</a></li>
<li><a href="#orgheadline22">6.3.3. Referential Integrity</a></li>
<li><a href="#orgheadline23">6.3.4. Effect</a></li>
</ul>
</li>
<li><a href="#orgheadline29">6.4. Create OC</a>
<ul>
<li><a href="#orgheadline25">6.4.1. Parameters</a></li>
<li><a href="#orgheadline26">6.4.2. Actor Credentials</a></li>
<li><a href="#orgheadline27">6.4.3. Referential Integrity</a></li>
<li><a href="#orgheadline28">6.4.4. Effect</a></li>
</ul>
</li>
<li><a href="#orgheadline34">6.5. Create NC</a>
<ul>
<li><a href="#orgheadline30">6.5.1. Parameters</a></li>
<li><a href="#orgheadline31">6.5.2. Actor Credentials</a></li>
<li><a href="#orgheadline32">6.5.3. Referential Integrity</a></li>
<li><a href="#orgheadline33">6.5.4. Effect</a></li>
</ul>
</li>
<li><a href="#orgheadline39">6.6. login</a>
<ul>
<li><a href="#orgheadline35">6.6.1. Parameters</a></li>
<li><a href="#orgheadline36">6.6.2. Actor Credentials</a></li>
<li><a href="#orgheadline37">6.6.3. Referential-Integrity</a></li>
<li><a href="#orgheadline38">6.6.4. Effect</a></li>
</ul>
</li>
<li><a href="#orgheadline43">6.7. logout</a>
<ul>
<li><a href="#orgheadline40">6.7.1. Parameters</a></li>
<li><a href="#orgheadline41">6.7.2. Referential-Integrity</a></li>
<li><a href="#orgheadline42">6.7.3. Effect</a></li>
</ul>
</li>
<li><a href="#orgheadline48">6.8. create audit</a>
<ul>
<li><a href="#orgheadline44">6.8.1. Parameters</a></li>
<li><a href="#orgheadline45">6.8.2. Referential Integrity</a></li>
<li><a href="#orgheadline46">6.8.3. Remarks</a></li>
<li><a href="#orgheadline47">6.8.4. Effect</a></li>
</ul>
</li>
<li><a href="#orgheadline54">6.9. delete User</a>
<ul>
<li><a href="#orgheadline49">6.9.1. Parameters</a></li>
<li><a href="#orgheadline50">6.9.2. Actor credentials</a></li>
<li><a href="#orgheadline51">6.9.3. Referential Integrity</a></li>
<li><a href="#orgheadline52">6.9.4. Remarks</a></li>
<li><a href="#orgheadline53">6.9.5. Effect</a></li>
</ul>
</li>
<li><a href="#orgheadline61">6.10. update User</a>
<ul>
<li><a href="#orgheadline55">6.10.1. Parameters</a></li>
<li><a href="#orgheadline56">6.10.2. Actor credentials</a></li>
<li><a href="#orgheadline57">6.10.3. Referential Integrity</a></li>
<li><a href="#orgheadline58">6.10.4. Effect</a></li>
<li><a href="#orgheadline59">6.10.5. Note</a></li>
<li><a href="#orgheadline60">6.10.6. Remarks</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1"><span class="section-number-2">1</span> Introduction</h2>
<div class="outline-text-2" id="text-1">
<p>
The purpose of this document is to describe the expected behaviour of the new
outreach portal. It is a specification for the new requirements of this portal.
</p>
</div>
</div>

<div id="outline-container-orgheadline5" class="outline-2">
<h2 id="orgheadline5"><span class="section-number-2">2</span> Notation</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2"><span class="section-number-3">2.1</span> Sets, cardinality and relations</h3>
<div class="outline-text-3" id="text-2-1">
<p>
If <code>A</code> is a set, then
</p>
<ol class="org-ol">
<li><code>A!</code> denotes exactly one element of <code>A</code>.</li>
<li><code>A?</code> denotes at most one element of <code>A</code>.</li>
<li><code>A+</code> denotes  one or more elements of <code>A</code></li>
<li><code>A*</code>  denotes at zero or more elements of <code>A</code>.  Often
abbreviated as <code>A</code>.</li>

<li><code>A &gt; B</code> denotes a relation <i>from</i> <code>A</code> <i>to</i> <code>B</code>.</li>
</ol>
</div>
</div>


<div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3"><span class="section-number-3">2.2</span> Relations and their cardinality type</h3>
<div class="outline-text-3" id="text-2-2">
<p>
A relation <code>r:A &gt; B</code> could relate each element of <code>A</code> to
zero, one or more elements of <code>B</code>.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Cardinality of B</th>
<th scope="col" class="org-left">Notation</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">&#xa0;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">at least zero elements of <code>B</code>.</td>
<td class="org-left">r: A &gt; B</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">at most one element of <code>B</code></td>
<td class="org-left">r: A &gt; B?</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">at least one element of <code>B</code></td>
<td class="org-left">r: A &gt; B+</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">exactly one element of <code>B</code></td>
<td class="org-left">r: A &gt; B!</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4"><span class="section-number-3">2.3</span> Example of Entity Relationship notation</h3>
<div class="outline-text-3" id="text-2-3">
<pre class="example">
 [email, user] : User? &gt; Email!
</pre>

<p>
Encodes the following items of information:
</p>

<ul class="org-ul">
<li><code>email</code> is a relation <i>from</i> the set <code>User</code> <i>to</i> the set
<code>Email</code>.</li>

<li><code>User</code> is called the <i>domain</i> of the relation <code>email</code>.</li>

<li><code>Email</code> is called the <i>codomain</i> of the relation <code>email</code>.</li>

<li>The relation <code>email</code> relates each element of <code>User</code> to
<i>exactly one</i> element of <code>Email</code>.  This is written as</li>
</ul>

<pre class="example">
email: User &gt; Email!
</pre>

<ul class="org-ul">
<li><code>user</code> is a relation <i>from</i> the set <code>Email</code> <i>to</i> the set
<code>User</code>.</li>

<li><code>Email</code> is called the <i>domain</i> of the relation <code>user</code>.</li>

<li><code>User</code> is called the <i>codomain</i> of the relation <code>user</code>.</li>

<li>The relation <code>user</code> relates each element of <code>Email</code> to
<i>at most one</i> element of <code>User</code>.  This is written as</li>
</ul>

<pre class="example">
user: Email &gt; User?
</pre>
</div>
</div>
</div>


<div id="outline-container-orgheadline6" class="outline-2">
<h2 id="orgheadline6"><span class="section-number-2">3</span> Abstract Entity Types</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">

<pre class="src src-spec">TYPE User
TYPE Name
TYPE Email
TYPE Role (admin + reviewer + guest + OCC(OC) + NCC(NC))
TYPE NodalCentre (abbreviation- NC )
TYPE OutreachCentre ( abbreviation- OC )
TYPE Institution
TYPE Session
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline8" class="outline-2">
<h2 id="orgheadline8"><span class="section-number-2">4</span> Relations and cardinality constraints over entity types</h2>
<div class="outline-text-2" id="text-4">
<p>
For each relation, we define its inverse next to it.
</p>
<div class="org-src-container">

<pre class="src src-spec">;;; Relations with cardinality constraints

[email, user]          : User?                    &gt; Email!
[name, user]           : User                     &gt; Name!
[roles, users]         : User                     &gt; Role+
[host, oc]             : OC?                      &gt; Institution!
[hub, spokes]          : OC!                      &gt; NC
[host, nc]             : NC?                      &gt; Institution!
[user, session]        : Session                  &gt; User!
[role, session]        : Session                  &gt; Role!

Note: A User can have only one session with a particular role
</pre>
</div>
</div>

<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7"><span class="section-number-3">4.1</span> Keys</h3>
<div class="outline-text-3" id="text-4-1">
<p>
An entity <code>K</code> is called a <i>key for</i> an entity <code>A</code> if there
is a relation <code>r: A? &gt; K!</code>.
</p>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Entity</th>
<th scope="col" class="org-left">Key</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">User</td>
<td class="org-left">Email</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">OC</td>
<td class="org-left">Institute</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">NC</td>
<td class="org-left">Institute</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">Session</td>
<td class="org-left">User and Role</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


<div id="outline-container-orgheadline13" class="outline-2">
<h2 id="orgheadline13"><span class="section-number-2">5</span> System state</h2>
<div class="outline-text-2" id="text-5">
<p>
The system's state is captured by a set of <i>state
variables</i>.  
</p>
</div>
<div id="outline-container-orgheadline9" class="outline-3">
<h3 id="orgheadline9"><span class="section-number-3">5.1</span> Primary Entity sets</h3>
<div class="outline-text-3" id="text-5-1">
<p>
For the purpose of <i>the application</i>, we maintain eight primary
state variables.  
</p>

<div class="org-src-container">

<pre class="src src-spec">;;; Primary state variables

Sets
 user-set      : set[User]      ; set of users in the system
 role-set      : set[Role]      ; set of roles in the system
 session-set   : set[Session]   ; set of sessions in the system
 nc-set        : set[NC]        ; set of nodal centres
 oc-set        :  set[OC]       ; set of outreach centres in the system
 institute-set : set[Institute] ; set of institutes in the system
 
Relations
 email [User,Email]
 name  [User,Name]
 roles [User,Role]
 host  [OC,Institute] and [NC,Institute]
 spokes [OC,NC]
 hub    [NC,OC]
 user   [Session,User]
 role   [Session,Role]
</pre>
</div>
</div>
</div>


<div id="outline-container-orgheadline10" class="outline-3">
<h3 id="orgheadline10"><span class="section-number-3">5.2</span> Derived Entity sets</h3>
<div class="outline-text-3" id="text-5-2">
<div class="org-src-container">

<pre class="src src-spec">  name-set           : user-set.name       ; set of names in the system
  email-set          : user-set.email      ; set of emails in the system
  oc-institute-set   : oc-set.host         ; set of institutes in the system associated with an oc
  nc-institute-set   : nc-set.host         ; set of institutes in the system associated with a nc
  logged-in-user-set : session-set.user    ; set of logged in users
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline12" class="outline-3">
<h3 id="orgheadline12"><span class="section-number-3">5.3</span> Referential Integrity Constraints over entity-sets</h3>
<div class="outline-text-3" id="text-5-3">
</div><div id="outline-container-orgheadline11" class="outline-4">
<h4 id="orgheadline11"><span class="section-number-4">5.3.1</span> <code>user-set</code></h4>
<div class="outline-text-4" id="text-5-3-1">
<p>
There is atleast one user  whose role is <code>admin</code>.
</p>

<div class="org-src-container">

<pre class="src src-spec">;;; The admin-user


For all elements u in admin-user-set, u belongs to user-set  ; there is atleast
                                                             ; one user with
                                                             ; role admin.
</pre>
</div>

<p>
These specifications also capture referential integrity.
</p>
<div class="org-src-container">

<pre class="src src-spec">;;; Relation variables with Referential Integrity
[email, user]    :  user-set!    &gt; email-set!
[name, user]     :  user-set+    &gt; name-set!    
[role, user]     :  user-set     &gt; role-set+   
[session, user]  :  user-set!    &gt; session-set?
[host, oc]       :  oc-set?      &gt; institution-set!
[hub, spokes]    :  oc-set!      &gt; nc-set
[host, nc]       :  oc-set?      &gt; institution-set!
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline62" class="outline-2">
<h2 id="orgheadline62"><span class="section-number-2">6</span> Operations</h2>
<div class="outline-text-2" id="text-6">
<p>
CRUD operations.  
</p>

<p>
Each operation is performed on an entity instance or an
entity-set.   The operation may take additional parameters.
It also takes as a  parameter of the credentials of the
actor performing the operation.
</p>

<ul class="org-ul">
<li>C  create a user</li>
<li>R  read from a user</li>
<li>U  update a user</li>
<li>D  delete a user</li>
</ul>
</div>

<div id="outline-container-orgheadline14" class="outline-3">
<h3 id="orgheadline14"><span class="section-number-3">6.1</span> Actor</h3>
<div class="outline-text-3" id="text-6-1">
<p>
Operations are performed by Actors.  Our application has 
the  actors:  <code>session</code>. 
</p>
</div>
</div>

<div id="outline-container-orgheadline19" class="outline-3">
<h3 id="orgheadline19"><span class="section-number-3">6.2</span> Add User</h3>
<div class="outline-text-3" id="text-6-2">
</div><div id="outline-container-orgheadline15" class="outline-4">
<h4 id="orgheadline15"><span class="section-number-4">6.2.1</span> Parameters</h4>
<div class="outline-text-4" id="text-6-2-1">
<div class="org-src-container">

<pre class="src src-spec">    u: User, s: Session
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline16" class="outline-4">
<h4 id="orgheadline16"><span class="section-number-4">6.2.2</span> Actor credentials</h4>
<div class="outline-text-4" id="text-6-2-2">
<div class="org-src-container">

<pre class="src src-spec">    s.role==admin or s.role==OCC(oc) where oc:oc-set
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline17" class="outline-4">
<h4 id="orgheadline17"><span class="section-number-4">6.2.3</span> Referential Integrity</h4>
<div class="outline-text-4" id="text-6-2-3">
<div class="org-src-container">

<pre class="src src-spec">    s: session-set
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline18" class="outline-4">
<h4 id="orgheadline18"><span class="section-number-4">6.2.4</span> Effect</h4>
<div class="outline-text-4" id="text-6-2-4">
<div class="org-src-container">

<pre class="src src-spec">    This operation creates a new user with default role being guest.
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline24" class="outline-3">
<h3 id="orgheadline24"><span class="section-number-3">6.3</span> Add Role</h3>
<div class="outline-text-3" id="text-6-3">
</div><div id="outline-container-orgheadline20" class="outline-4">
<h4 id="orgheadline20"><span class="section-number-4">6.3.1</span> Parameters</h4>
<div class="outline-text-4" id="text-6-3-1">
<div class="org-src-container">

<pre class="src src-spec">    u: User, r: Role, s: Session
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline21" class="outline-4">
<h4 id="orgheadline21"><span class="section-number-4">6.3.2</span> Actor credentials</h4>
<div class="outline-text-4" id="text-6-3-2">
<div class="org-src-container">

<pre class="src src-spec">    s.role == admin or s.role == OCC(oc)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline22" class="outline-4">
<h4 id="orgheadline22"><span class="section-number-4">6.3.3</span> Referential Integrity</h4>
<div class="outline-text-4" id="text-6-3-3">
<div class="org-src-container">

<pre class="src src-spec">    s:session-set
    s.role == admin =&gt; r:role-set
    s.role == OCC(oc) =&gt;          
         nc:nc-set
         r==NCC(nc)
         hub(nc) == oc
    u:user-set
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline23" class="outline-4">
<h4 id="orgheadline23"><span class="section-number-4">6.3.4</span> Effect</h4>
<div class="outline-text-4" id="text-6-3-4">
<div class="org-src-container">

<pre class="src src-spec">    r is added to u.roles
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline29" class="outline-3">
<h3 id="orgheadline29"><span class="section-number-3">6.4</span> Create OC</h3>
<div class="outline-text-3" id="text-6-4">
</div><div id="outline-container-orgheadline25" class="outline-4">
<h4 id="orgheadline25"><span class="section-number-4">6.4.1</span> Parameters</h4>
<div class="outline-text-4" id="text-6-4-1">
<div class="org-src-container">

<pre class="src src-spec">    i:Institute, s:Session
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline26" class="outline-4">
<h4 id="orgheadline26"><span class="section-number-4">6.4.2</span> Actor Credentials</h4>
<div class="outline-text-4" id="text-6-4-2">
<div class="org-src-container">

<pre class="src src-spec">    s.role==admin
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline27" class="outline-4">
<h4 id="orgheadline27"><span class="section-number-4">6.4.3</span> Referential Integrity</h4>
<div class="outline-text-4" id="text-6-4-3">
<div class="org-src-container">

<pre class="src src-spec">    s:session-set
    i:institute-set
    i:~ oc-institute-set 
    i:~ nc-institute-set
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline28" class="outline-4">
<h4 id="orgheadline28"><span class="section-number-4">6.4.4</span> Effect</h4>
<div class="outline-text-4" id="text-6-4-4">
<div class="org-src-container">

<pre class="src src-spec">    role-set' =role-set U OCC(oc)
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline34" class="outline-3">
<h3 id="orgheadline34"><span class="section-number-3">6.5</span> Create NC</h3>
<div class="outline-text-3" id="text-6-5">
</div><div id="outline-container-orgheadline30" class="outline-4">
<h4 id="orgheadline30"><span class="section-number-4">6.5.1</span> Parameters</h4>
<div class="outline-text-4" id="text-6-5-1">
<div class="org-src-container">

<pre class="src src-spec">    i:Institute, oc:OC, s:Session
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline31" class="outline-4">
<h4 id="orgheadline31"><span class="section-number-4">6.5.2</span> Actor Credentials</h4>
<div class="outline-text-4" id="text-6-5-2">
<div class="org-src-container">

<pre class="src src-spec">    s.role==admin or s.role==OCC(oc) and oc:oc-set
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline32" class="outline-4">
<h4 id="orgheadline32"><span class="section-number-4">6.5.3</span> Referential Integrity</h4>
<div class="outline-text-4" id="text-6-5-3">
<div class="org-src-container">

<pre class="src src-spec">    s:session-set
    i:institute-set  
    i:~ nc-institute-set
    if i : oc-institute-set
        i.oc == oc      #Note : i.oc represtsents the oc associated with i
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline33" class="outline-4">
<h4 id="orgheadline33"><span class="section-number-4">6.5.4</span> Effect</h4>
<div class="outline-text-4" id="text-6-5-4">
<div class="org-src-container">

<pre class="src src-spec">    role-set' =role-set U NCC(nc)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline39" class="outline-3">
<h3 id="orgheadline39"><span class="section-number-3">6.6</span> login</h3>
<div class="outline-text-3" id="text-6-6">
</div><div id="outline-container-orgheadline35" class="outline-4">
<h4 id="orgheadline35"><span class="section-number-4">6.6.1</span> Parameters</h4>
<div class="outline-text-4" id="text-6-6-1">
<div class="org-src-container">

<pre class="src src-spec">    u: User, r:Role
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline36" class="outline-4">
<h4 id="orgheadline36"><span class="section-number-4">6.6.2</span> Actor Credentials</h4>
<div class="outline-text-4" id="text-6-6-2">
<div class="org-src-container">

<pre class="src src-spec"></pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline37" class="outline-4">
<h4 id="orgheadline37"><span class="section-number-4">6.6.3</span> Referential-Integrity</h4>
<div class="outline-text-4" id="text-6-6-3">
<div class="org-src-container">

<pre class="src src-spec">    u:user-set
    r:role-set
    r:user.roles
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline38" class="outline-4">
<h4 id="orgheadline38"><span class="section-number-4">6.6.4</span> Effect</h4>
<div class="outline-text-4" id="text-6-6-4">
<div class="org-src-container">

<pre class="src src-spec">    A session for that user is added to the session-set
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline43" class="outline-3">
<h3 id="orgheadline43"><span class="section-number-3">6.7</span> logout</h3>
<div class="outline-text-3" id="text-6-7">
</div><div id="outline-container-orgheadline40" class="outline-4">
<h4 id="orgheadline40"><span class="section-number-4">6.7.1</span> Parameters</h4>
<div class="outline-text-4" id="text-6-7-1">
<div class="org-src-container">

<pre class="src src-spec">    s:Session
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline41" class="outline-4">
<h4 id="orgheadline41"><span class="section-number-4">6.7.2</span> Referential-Integrity</h4>
<div class="outline-text-4" id="text-6-7-2">
<div class="org-src-container">

<pre class="src src-spec">    s:session-set
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline42" class="outline-4">
<h4 id="orgheadline42"><span class="section-number-4">6.7.3</span> Effect</h4>
<div class="outline-text-4" id="text-6-7-3">
<div class="org-src-container">

<pre class="src src-spec">    s is removed from the session-set
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline48" class="outline-3">
<h3 id="orgheadline48"><span class="section-number-3">6.8</span> create audit</h3>
<div class="outline-text-3" id="text-6-8">
</div><div id="outline-container-orgheadline44" class="outline-4">
<h4 id="orgheadline44"><span class="section-number-4">6.8.1</span> Parameters</h4>
<div class="outline-text-4" id="text-6-8-1">
<div class="org-src-container">

<pre class="src src-spec">    s:Session, old-data:String, time-stamp:String, primary-key-old:Integer,
    primary-key-current-session:Integer, entity:String
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline45" class="outline-4">
<h4 id="orgheadline45"><span class="section-number-4">6.8.2</span> Referential Integrity</h4>
<div class="outline-text-4" id="text-6-8-2">
<div class="org-src-container">

<pre class="src src-spec">    s:session-set
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline46" class="outline-4">
<h4 id="orgheadline46"><span class="section-number-4">6.8.3</span> Remarks</h4>
<div class="outline-text-4" id="text-6-8-3">
<div class="org-src-container">

<pre class="src src-spec">    This function logs an Audit to the database. 
    old-data is a string containing the values of the object before it is changed.
    primary-key-old contains the id of the object being changed
    primary-key-current-session contains the id of the session of the user who is changing the object
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline47" class="outline-4">
<h4 id="orgheadline47"><span class="section-number-4">6.8.4</span> Effect</h4>
<div class="outline-text-4" id="text-6-8-4">
<div class="org-src-container">

<pre class="src src-spec">    An Audit record is created and saved in the database.
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline54" class="outline-3">
<h3 id="orgheadline54"><span class="section-number-3">6.9</span> delete User</h3>
<div class="outline-text-3" id="text-6-9">
</div><div id="outline-container-orgheadline49" class="outline-4">
<h4 id="orgheadline49"><span class="section-number-4">6.9.1</span> Parameters</h4>
<div class="outline-text-4" id="text-6-9-1">
<div class="org-src-container">

<pre class="src src-spec">    u: User, s:  Session
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline50" class="outline-4">
<h4 id="orgheadline50"><span class="section-number-4">6.9.2</span> Actor credentials</h4>
<div class="outline-text-4" id="text-6-9-2">
<div class="org-src-container">

<pre class="src src-spec">    s.role==admin  or s.role==OCC(oc) where oc:oc-set
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline51" class="outline-4">
<h4 id="orgheadline51"><span class="section-number-4">6.9.3</span> Referential Integrity</h4>
<div class="outline-text-4" id="text-6-9-3">
<div class="org-src-container">

<pre class="src src-spec">    u: user-set
    s: session-set
    u:~logged-in-user-set
</pre>
</div>
</div>
</div>


<div id="outline-container-orgheadline52" class="outline-4">
<h4 id="orgheadline52"><span class="section-number-4">6.9.4</span> Remarks</h4>
<div class="outline-text-4" id="text-6-9-4">
<div class="org-src-container">

<pre class="src src-spec">   An admin can delete any user
   A user with role OCC can delete a user with role NCC only if he belongs to an NC which is a spoke of the OC.
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline53" class="outline-4">
<h4 id="orgheadline53"><span class="section-number-4">6.9.5</span> Effect</h4>
<div class="outline-text-4" id="text-6-9-5">
<div class="org-src-container">

<pre class="src src-spec">    u is removed from the user-set
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline61" class="outline-3">
<h3 id="orgheadline61"><span class="section-number-3">6.10</span> update User</h3>
<div class="outline-text-3" id="text-6-10">
</div><div id="outline-container-orgheadline55" class="outline-4">
<h4 id="orgheadline55"><span class="section-number-4">6.10.1</span> Parameters</h4>
<div class="outline-text-4" id="text-6-10-1">
<div class="org-src-container">

<pre class="src src-spec">    n: Name,e:Email, u: User, s:  Session
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline56" class="outline-4">
<h4 id="orgheadline56"><span class="section-number-4">6.10.2</span> Actor credentials</h4>
<div class="outline-text-4" id="text-6-10-2">
<div class="org-src-container">

<pre class="src src-spec">    s.role==admin  or s.role==OCC(oc) where oc:oc-set
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline57" class="outline-4">
<h4 id="orgheadline57"><span class="section-number-4">6.10.3</span> Referential Integrity</h4>
<div class="outline-text-4" id="text-6-10-3">
<div class="org-src-container">

<pre class="src src-spec">    u: user-set
    s: session-set
    u:~logged-in-user-set
    e:~email-set
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline58" class="outline-4">
<h4 id="orgheadline58"><span class="section-number-4">6.10.4</span> Effect</h4>
<div class="outline-text-4" id="text-6-10-4">
<div class="org-src-container">

<pre class="src src-spec">    The user details are updated.
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline59" class="outline-4">
<h4 id="orgheadline59"><span class="section-number-4">6.10.5</span> Note</h4>
<div class="outline-text-4" id="text-6-10-5">
<div class="org-src-container">

<pre class="src src-spec">    Not sure if user should be logged-in. 
    If the constraint of user not being logged in is implemented, 
    then there should be a way to include session time-outs.
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline60" class="outline-4">
<h4 id="orgheadline60"><span class="section-number-4">6.10.6</span> Remarks</h4>
<div class="outline-text-4" id="text-6-10-6">
<div class="org-src-container">

<pre class="src src-spec">   An admin can update any user.
   A user with role OCC(oc) can update a user with role NCC(nc) such that
   hub of nc == oc (oc:oc-set and nc:nc-set) .
</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: <span class="timestamp-wrapper"><span class="timestamp">[2016-06-03 Fri]</span></span></p>
<p class="author">Author: VLEAD</p>
<p class="date">Created: 2016-06-17 Fri 10:17</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
